<!DOCTYPE html>
<html lang="es">
<head>
        <meta charset="utf-8" />
        <title>Ejercicios de virsh</title>
        <link rel="stylesheet" href="../theme/css/main.css" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../">Introducción al Cloud Computing </a></h1>
                <nav><ul>
                </ul>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="../virt/ejercicios-virsh.html" rel="bookmark"
           title="Permalink to Ejercicios de virsh">Ejercicios de virsh</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>lun 12 octubre 2020</span>

</footer><!-- /.post-info -->      <h2>Configuración inicial de <code>qemu:///system</code></h2>
<ol>
<li>
<p>Si no existiene la red default, agrega una red tipo NAT con el
   direccionamiento <code>192.168.122.0/24</code> que utilice el bridge interno
   <code>virbr0</code></p>
</li>
<li>
<p>Si no existiese el directorio de almacenamiento por defecto, crea
   un volumen lógico en tu sistema y móntalo de forma permanente en el
   directorio /VM. Añade este directorio como "pool" por defecto para
   los ficheros de imágenes de los dispositivos de almacenamiento de
   las máquinas virtuales</p>
</li>
<li>
<p>En lugar de instalar una máquina virtual, vamos a utilizar una
   imagen ya creada, haciendo algunas modificaciones previamente.</p>
<ul>
<li>Descarga el fichero
   <a href="https://cdimage.debian.org/cdimage/openstack/current-10/debian-10-openstack-amd64.qcow2">debian-10-openstack-amd64.qcow2</a>
   que se corresponde con una imagen de Debian Buster en formato qcow2
   que podemos usar en libvirt/KVM.</li>
<li>Averigua los pasos que tienes que realizar para montar la imagen
  usando el módulo del kérnel <code>nbd</code> y la herramienta <code>qemu-nbd</code>.</li>
<li>Define una contraseña para el usuario debian y/o copia tu clave
pública ssh en el lugar adecuado.</li>
<li>Desmonta la imagen qcow2.</li>
<li>Crea un volumen en el "pool" por defecto que contenga esa imagen.</li>
<li>Define el dominio con el fichero XML de ejemplo</li>
<li>Arranca el dominio y accede a la máquina virtual por ssh
(tendrás que averiguar la dirección IP que tiene).</li>
</ul>
</li>
<li>
<p>Crea un nuevo "pool" de almacenamiento, de tipo LVM y añade el
    grupo de volúmenes de tu equipo. Crea un nuevo volumen en este
    "pool", vuelca en el volumen el contenido de la imagen qcow2 del
    ejercicio anterior. Define y arranca una máquina virtual que
    utilice dicho volumen como disco raíz.</p>
</li>
</ol>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.</p>
        </footer><!-- /#contentinfo -->

</body>
</html>